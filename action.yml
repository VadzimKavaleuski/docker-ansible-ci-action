# action.yml
name: 'molecule test'
description: 'Start molekule test in docker'
# inputs:
#   who-to-greet:  # id of input
#     description: 'Who to greet'
#     required: true
#     default: 'World'
# outputs:
#   time: # id of output
#     description: 'The time we greeted you'
runs:
  using: 'docker'
  image: 'docker://leandelivery/docker-ansible-ci:ansible-2.8'
  entrypoint : '/bin/sh'
  # args: ['-c "mkdir -p /github/${GITHUB_REPOSITORY}&&cp -R /github/workspace/* /github/${GITHUB_REPOSITORY}&&cp /github/workspace/.yamllint /github/${GITHUB_REPOSITORY}&&cp /github/workspace/.ansible-lint /github/${GITHUB_REPOSITORY}&&cd /github/${GITHUB_REPOSITORY}&&molecule test -s default"']
  args: 
    - mkdir -p /github/${GITHUB_REPOSITORY}
    - cp -R /github/workspace/* /github/${GITHUB_REPOSITORY}
    - cp /github/workspace/.yamllint /github/${GITHUB_REPOSITORY}
    - cp /github/workspace/.ansible-lint /github/${GITHUB_REPOSITORY}
    - cd /github/${GITHUB_REPOSITORY}
    - molecule test -s default"']
